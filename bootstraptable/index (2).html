<title>ikonit</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<style>
    button {
        border: none;
        background-color: transparent;
    }
</style>
<div class="container-fluid ">
    <nav class="navbar navbar-expand-sm bg-primary">

        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link text-white">Selaa kahveja</a>
                </li>
                <li class="nav-item">
                    <button id="add-btn" type="button" class="nav-link text-white" onclick="addInputRow()">Lisää uusi
                        kahvi</button>
                </li>
            </ul>
        </div>
    </nav>
    <div>
        <table class="table table-responsive table-bordered" id="table">
            <thead>
                <tr>
                    <th>KahviID</th>
                    <th>Kahvi</th>
                    <th>Paahtamo</th>
                    <th>paahtoaste</th>
                    <th>Muokkaa</th>
                    <th>Poista</th>
                </tr>
            </thead>
            <tbody id="field">
                <tr>
                    <td>1</td>
                    <td>Paulig Mainio</td>
                    <td>Paulig</td>
                    <td>Tumma paahto</td>
                    <td><button class="edit" type="button" onclick="edit(this)"><i
                                class="bi bi-pencil-square"></i></button></td>
                    <td><button type="button" onclick="deleteFunc(this)"><i class="bi bi-trash"></i></button></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Löfberg's Inferno</td>
                    <td>Löfberg's</td>
                    <td>Tumma paahto</td>
                    <td><button class="edit" type="button" onclick="edit(this)"><i class="bi bi-pencil-square"></i>
                            </buttona>
                    </td>
                    <td><button type="button" onclick="deleteFunc(this)"><i class="bi bi-trash"></i></button></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Kulta Mokka</td>
                    <td>Meira</td>
                    <td>Vaalea paahto</td>
                    <td><button class="edit" type="button" onclick="edit(this)"><i
                                class="bi bi-pencil-square"></i></button></td>
                    <td><button type="button" onclick="deleteFunc(this)"><i class="bi bi-trash"></i></button></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<script>
    const table = document.getElementById("table");
    const addBtn = document.getElementById("add-btn");
    // Store data for inputing data to the table because it is used twice in this programe
    const inputRow =
        "<tr>" +
        '<td><input type="text" class="form-control"></td>' +
        '<td><input type="text" class="form-control"></td>' +
        '<td><input type="text" class="form-control"></td>' +
        '<td><input type="text" class="form-control"></td>' +
        '<td><button type="button" onclick="addTotable(this)"><i class="bi bi-plus-circle"></i></button></td>' +
        '<td><button type="button" onclick="deleteFunc(this)"><i class="bi bi-trash"></i></button></td>' +
        "</tr>";
    function addInputRow() {
        // Display the datainput row
        const newRow = document.createElement("tr");
        newRow.innerHTML = inputRow;
        document.getElementById("field").appendChild(newRow);
    }
    function addTotable(btn) {
        // Store action buttons and change given row to the data in input section + action buttons
        const row = btn.closest("tr");
        const cells = row.getElementsByTagName('td');
        var actionBtn = ['<td><button class="edit" type="button" onclick="edit(this)"><i class="bi bi-pencil-square"></i></button></td>',
            '<td><button type="button" onclick="deleteFunc(this)"><i class="bi bi-trash"></i></button></td>'];
        const data = Array.from(row.querySelectorAll("input"));
        data.forEach(inputData => {
            if (inputData.value == "") {
                inputData.style.borderColor = "#d9534f";
            } else { inputData.style.borderColor = "lightgray"; };
        });
        if (data.every(e => e.value !== "")) {
            data.forEach((cellData, index) => {
                cells[index].innerHTML = cellData.value;
            });
            actionBtn.forEach((btnData, index) => {
                cells[index + 4].innerHTML = btnData;
            })
        }
    }
    function edit(btn) {
        // Change the given row to input row with the existing data in the cells
        const row = btn.closest("tr");
        const cells = Array.from(row.querySelectorAll("td"));
        row.innerHTML = inputRow;
        const data = Array.from(row.querySelectorAll("input"));

        data.forEach((newData, index) => {
            newData.value = cells[index].innerHTML;
        });
    }
    // Delete given row from table
    function deleteFunc(btn) {
        btn.closest("tr").remove();
    }
</script>